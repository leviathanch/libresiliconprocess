% substrate
\fill[substrate] (0,0) rectangle (20,2);
\node at (2,0.5) {Silicon substrate};
% n-well
\fill[nwell] (1,0.75) rectangle (8.5,2);
\node at (5.75,1) {N-Well};
% p-well
\fill[pwell] (11.5,0.75) rectangle (19,2);
\node at (14.25,1) {P-Well};
% body
\fill[nimplant] (1.5,1) rectangle (3,2);
\node at (2,1.5) {n+};
% source
\fill[pimplant] (3.5,1) rectangle (5,2);
\node at (4,1.5) {p+};
% drain
\fill[pimplant] (6.5,1) rectangle (8,2);
\node at (7,1.5) {p+};
%% gate:
% gate oxide
\fill[gateoxide] (4.8,2) rectangle (6.7,2.1);
% gate poly
\fill[poly] (4.8,2.1) rectangle (6.7,2.2);
% isolation oxides:
\fill[isolationoxide] (1,2) rectangle (2,3);
\fill[isolationoxide] (2.5,2) rectangle (4,3);
\fill[isolationoxide] (4.5,2) rectangle (4.8,3);
\fill[isolationoxide] (4.8,2.2) rectangle (5.5,3);
\fill[isolationoxide] (6,2.2) rectangle (6.7,3);
\fill[isolationoxide] (6.7,2) rectangle (7,3);
\fill[isolationoxide] (7.5,2) rectangle (8.5,3);

%trenches
\fill[isolationoxide] (0,0.75) rectangle (1,2);
\fill[isolationoxide] (8.5,0.75) rectangle (11.5,2);
\fill[isolationoxide] (19,0.75) rectangle (20,2);

%%% nmos:
% body
\fill[pimplant] (17,1) rectangle (18.5,2);
\node at (18,1.5) {p+};
% source
\fill[nimplant] (15,1) rectangle (16.5,2);
\node at (16,1.5) {n+};
% drain
\fill[nimplant] (12,1) rectangle (13.5,2);
\node at (13,1.5) {n+};

%% gate:
% gate oxide
\fill[gateoxide] (13.3,2) rectangle (15.2,2.1);
% gate poly
\fill[poly] (13.3,2.1) rectangle (15.2,2.2);

% metals
\fill[metal1] (17.5,2) rectangle (18,3);
\fill[metal1] (15.5,2) rectangle (16,3);
\fill[metal1] (15.5,3) rectangle (19,3.2); % connection pad GND

\fill[metal1] (14,2.2) rectangle (14.5,3);
\fill[metal1] (13.8,3) rectangle (14.7,3.2); % connection pad VG

\fill[metal1] (12.5,2) rectangle (13,3);
\fill[metal1] (12.3,3) rectangle (13.2,3.2); % connection pad VDD

\fill[metal1] (2,2) rectangle (2.5,3);
\fill[metal1] (4,2) rectangle (4.5,3);
\fill[metal1] (1,3) rectangle (4.5,3.2); % connection pad GND

\fill[metal1] (5.5,2.2) rectangle (6,3);
\fill[metal1] (5.3,3) rectangle (6.2,3.2); % connection pad VG

\fill[metal1] (7,2) rectangle (7.5,3);
\fill[metal1] (6.8,3) rectangle (7.7,3.2); % connection pad VDD

% isolation oxides:
\fill[isolationoxide] (18,2) rectangle (19,3);
\fill[isolationoxide] (16,2) rectangle (17.5,3);
\fill[isolationoxide] (15.2,2) rectangle (15.5,3);
\fill[isolationoxide] (14.5,2.2) rectangle (15.2,3);
\fill[isolationoxide] (13.3,2.2) rectangle (14,3);
\fill[isolationoxide] (13,2) rectangle (13.3,3);
\fill[isolationoxide] (11.5,2) rectangle (12.5,3);

\node at (1.5,3.5) {VDD};
\node at (16.5,3.5) {Ground};
\node at (5.5,3.4) {Input};
\node at (14,3.4) {Input};
\node at (7,3.4) {Output};
\node at (12.5,3.4) {Output};

\node at (0.5,1.5) {Trench};
\node at (9.5,1.5) {Trench};
\node at (19.5,1.5) {Trench};